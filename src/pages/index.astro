---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';

const title = "Florecer Mind - Where Research Blooms into Wisdom";
const description = "Transform complex academic research into accessible, practical wisdom. Discover evidence-based insights from counseling, neuroscience, and cognitive science.";

// Get latest blog posts for homepage
const allPosts = await getCollection('blog');
const latestPosts = allPosts
    .sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime())
    .slice(0, 3); // Show top 3 latest posts
---

<Layout title={title} description={description}>
    <!-- Hero Section -->
    <section class="py-12 sm:py-20">
        <h1 class="mb-6 text-4xl font-bold text-primary sm:text-6xl">
            Where Research<br />Blooms into Wisdom
        </h1>
        <p class="mb-8 text-lg leading-relaxed text-neutral-700 sm:text-xl max-w-3xl">
            We transform complex academic research from counseling, neuroscience, and cognitive science
            into accessible, practical wisdom for everyday people and counselors.
            Rescuing valuable research from academic obscurity and helping it flourish in real lives.
        </p>
        <div class="flex flex-wrap gap-4">
            <a href="/blog" class="btn btn-primary btn-lg">
                Explore Research
            </a>
            <a href="/newsletter" class="btn btn-outline btn-lg">
                Subscribe to Newsletter
            </a>
        </div>
    </section>

    <!-- Mission Section -->
    <section class="py-12 border-t border-neutral-300">
        <div class="grid gap-8 md:grid-cols-3">
            <div class="p-6 rounded-lg bg-neutral-100">
                <h3 class="mb-3 text-xl font-bold text-primary">Research Spotlights</h3>
                <p class="text-neutral-700">
                    Weekly deep-dives into specific studies, making complex findings accessible and actionable.
                </p>
            </div>
            <div class="p-6 rounded-lg bg-neutral-100">
                <h3 class="mb-3 text-xl font-bold text-primary">Practical Applications</h3>
                <p class="text-neutral-700">
                    Evidence-based techniques and insights you can implement in your daily life.
                </p>
            </div>
            <div class="p-6 rounded-lg bg-neutral-100">
                <h3 class="mb-3 text-xl font-bold text-primary">Expert Insights</h3>
                <p class="text-neutral-700">
                    Valuable for both everyday people seeking growth and counselors deepening their practice.
                </p>
            </div>
        </div>
    </section>

    <!-- Featured Research -->
    <section class="py-12 border-t border-neutral-300">
        <h2 class="mb-8 text-3xl font-bold text-primary">Latest Research Spotlights</h2>
        {latestPosts.length > 0 ? (
            <div class="space-y-6">
                {latestPosts.map((post) => (
                    <article class="p-6 border border-neutral-300 rounded-lg hover:shadow-lg transition-shadow">
                        <div class="mb-2 flex items-center gap-3 text-sm">
                            <span class="px-3 py-1 bg-secondary/20 text-primary rounded-full font-medium">
                                {post.data.category}
                            </span>
                            <time datetime={post.data.pubDate.toISOString()} class="text-neutral-600">
                                {post.data.pubDate.toLocaleDateString('en-US', {
                                    month: 'long',
                                    day: 'numeric',
                                    year: 'numeric'
                                })}
                            </time>
                        </div>
                        <h3 class="mb-2 text-2xl font-bold text-neutral-900">
                            <a href={`/blog/${post.slug}`} class="hover:text-primary">
                                {post.data.title}
                            </a>
                        </h3>
                        <p class="mb-4 text-neutral-600">
                            {post.data.description}
                        </p>
                        {post.data.tags && post.data.tags.length > 0 && (
                            <div class="mb-4 flex flex-wrap gap-2">
                                {post.data.tags.slice(0, 4).map((tag) => (
                                    <span class="px-2 py-1 text-xs bg-neutral-200 text-neutral-700 rounded-full">
                                        #{tag}
                                    </span>
                                ))}
                            </div>
                        )}
                        <a href={`/blog/${post.slug}`} class="text-primary font-medium hover:underline">
                            Read More â†’
                        </a>
                    </article>
                ))}
            </div>
        ) : (
            <div class="p-8 text-center bg-neutral-100 rounded-lg">
                <p class="text-neutral-700">New research spotlights coming soon!</p>
            </div>
        )}

        <div class="mt-8 text-center">
            <a href="/blog" class="btn btn-outline">
                View All Research
            </a>
        </div>
    </section>

    <!-- Newsletter CTA -->
    <section class="py-12 border-t border-neutral-300">
        <div class="p-8 text-center rounded-lg bg-primary text-primary-content">
            <h2 class="mb-4 text-3xl font-bold">Join the Research Rescue Weekly</h2>
            <p class="mb-6 text-lg">
                Get evidence-based insights delivered to your inbox. No jargon, just practical wisdom.
            </p>
            <a href="/newsletter" class="btn btn-lg bg-white text-primary hover:bg-neutral-100">
                Subscribe Now
            </a>
        </div>
    </section>
</Layout>
